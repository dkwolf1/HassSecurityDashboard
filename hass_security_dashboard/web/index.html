<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Hass Security Dashboard</title>
  <base href="./" />
  <style>
    body { font-family: sans-serif; padding: 2em; background: #f5f5f5; }
    h1 { font-size: 1.5em; }
    .card { background: white; padding: 1em; border-radius: 8px; margin: 1em 0; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
    .ok { color: green; }
    .fail { color: red; }
    .warning { color: orange; }
    select { margin-left: 1em; }
  </style>
</head>
<body>
  <h1>üîí <span id="title">Hass Security Dashboard</span>
    <select onchange="setLang(this.value)">
      <option value="en">EN</option>
      <option value="nl">NL</option>
    </select>
  </h1>
  <div id="dash">Loading...</div>
  <script>
    const texts = {
      en: { title: "Hass Security Dashboard", status: "Status", log: "Log" },
      nl: { title: "Beveiligingsdashboard", status: "Status", log: "Logboek" }
    };
    let lang = "en";

    function setLang(l) {
      lang = l;
      document.getElementById("title").innerText = texts[lang].title;
      load();
    }

    async function load() {
      try {
        const res = await fetch("api/status");
        const data = await res.json();
        const dash = document.getElementById("dash");
        dash.innerHTML = "";
        for (const [key, val] of Object.entries(data)) {
          const card = document.createElement("div");
          card.className = "card";
          card.innerHTML = \`
            <h3>\${key.toUpperCase()}</h3>
            <div class="\${val.status}"><strong>\${texts[lang].status}:</strong> \${val.status}</div>
            <details><summary>\${texts[lang].log}</summary><pre>\${val.log}</pre></details>
          \`;
          dash.appendChild(card);
        }
      } catch (e) {
        document.getElementById("dash").innerText = "‚ùå Failed to load: " + e;
      }
    }

    window.onload = load;
  </script>
</body>
</html>